<% reference = polymorphic_stack.last
   citations = reference.citations
   citations_size = citations.size
   if citations_size==0 
	 path = new_polymorphic_path(polymorphic_stack + [Citation]) %>
<%=  link_to(ts('add.record', :what => Citation.model_name.human), path) if authorized?(path) %>
<% elsif citations_size==1 %>
<%=  link_to ts('see.record', :what => Citation.model_name.human), polymorphic_path(polymorphic_stack + [citations.first]) %>
<% else %>
<%=  link_to ts('see.record', :what => "#{Citation.model_name.human(:count => :many)} (#{citations_size})"), polymorphic_path(polymorphic_stack + [Citation.new]) %>
<% end %>